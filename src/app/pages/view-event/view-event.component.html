<div class="container">
  <div class="nav">
    <img src="../../../assets/logout.svg" alt="" (click)="logout()" />
    <h3>Product</h3>
    <img src="../../../assets/leaderboard.svg" alt="" (click)="leaderboard()" />
  </div>
  <div class="controls" *ngIf="isAdmin">
    <button
      pButton
      class="btn btn-primary"
      type="button"
      label="Add Activity"
      icon="pi pi-plus"
      (click)="navigateToCreate()"
    ></button>
  </div>
  <div class="activity-container">
    <div class="crest">
      <img src="../../../assets/Crest.svg" alt="" />
    </div>
    <h2>Activities</h2>
    <p>Please select an activity below</p>

    <div class="activities" *ngIf="this.activities.length > 0 && !loading">
      <div
        class="activity-section"
        *ngFor="let activity of activities; let i = index"
      >
        <app-small-card
          [label]="activity.name"
          [imgUrl]="activity.imgUrl"
          class="activity-card"
          [editable]="isAdmin"
          (view)="navigateToActivity(activity.id)"
          (edit)="editActivity(activity.id)"
        ></app-small-card>
        <div
          class="activity-details"
          *ngIf="teamData.length > 0 && teamData[i]"
        >
          <p>Teams: {{ teamData[i].teams.length }}</p>
        </div>
      </div>
    </div>
    <div class="loader" *ngIf="loading">
      <app-spinner></app-spinner>
    </div>
    <div *ngIf="this.activities.length <= 0">
      <p>No Activities found</p>
    </div>
  </div>
  <div class="controls">
    <img
      src="../../../assets/camera.svg"
      alt=""
      class="camera"
      (click)="toggleWebcam()"
    />
  </div>
  <div class="camera-controls">
    <webcam
      class="webcam"
      [trigger]="triggerObservable"
      (imageCapture)="handleImage($event)"
      *ngIf="showWebcam"
      [allowCameraSwitch]="allowCameraSwitch"
      [switchCamera]="nextWebcamObservable"
      [videoOptions]="videoOptions"
      [imageQuality]="1"
      (cameraSwitched)="cameraWasSwitched($event)"
      (initError)="handleInitError($event)"
    ></webcam>

    <div id="reader" style="display: none"></div>
  </div>
  <div class="dialog">
    <p-dialog
      header="Booking information"
      *ngIf="dialogContent"
      [(visible)]="dialogVisible"
      [style]="{ width: '90vw', height: '90vh' }"
      [modal]="true"
      [draggable]="false"
      [resizable]="false"
    >
      <div>
        <p>BookingId: {{ dialogContent.id }}</p>
        <p>UserId: {{ dialogContent.user.id }}</p>
        <p>Username: {{ dialogContent.user.username }}</p>
        <p>
          Role: {{ dialogContent.user.userType === 0 ? "General" : "Admin" }}
        </p>
        <p>No of peeps: {{ dialogContent.noOfPeople }}</p>
      </div>
    </p-dialog>
  </div>
</div>
